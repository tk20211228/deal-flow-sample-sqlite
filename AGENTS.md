# AGENTS.md - AI 開発支援ガイドライン

## 📝 コミットルール

### 基本原則

**厳密に Conventional Commits 1.0.0 仕様を使用してください。**

- **type（型）** と **description（説明）** は必須です
- 日本語でサポートし、初学者でもわかるように丁寧に解説します
- 変更部分のみをわかりやすく説明し、提示します

### 基本フォーマット

<型>[任意 スコープ]: <タイトル>
[任意 本文]
[任意 フッター]

### 🏷️ 型（Type）- 必須

#### 標準型（仕様準拠）

| 型                | 説明       | SemVer 影響 |
| ----------------- | ---------- | ----------- |
| `fix`             | バグ修正   | PATCH       |
| `feat`            | 新機能追加 | MINOR       |
| `BREAKING CHANGE` | 破壊的変更 | MAJOR       |

#### 推奨型（@commitlint/config-conventional 準拠）

| 型         | 説明                               | 使用例                     |
| ---------- | ---------------------------------- | -------------------------- |
| `build`    | ビルドシステム・外部依存関係変更   | Webpack、npm 設定          |
| `chore`    | ソース・テスト以外の変更           | 設定ファイル、依存関係更新 |
| `ci`       | CI 設定・スクリプト変更            | GitHub Actions、CircleCI   |
| `docs`     | ドキュメント専用変更               | README、API 文書           |
| `style`    | コード意味に影響しない変更         | フォーマット、空白         |
| `refactor` | バグ修正・機能追加以外のコード変更 | コード整理、最適化         |
| `perf`     | パフォーマンス改善                 | 処理速度向上               |
| `test`     | テスト追加・修正                   | ユニットテスト、E2E        |
| `ui`       | UI コンポーネント・スタイル変更    | shadcn/ui、Tailwind        |
| `api`      | API 関連変更                       | Next.js API Routes         |
| `db`       | データベース関連変更               | Supabase PostgreSQL        |

### 🎯 スコープ（Scope）- 任意

| スコープ     | 説明                     | カテゴリ       |
| ------------ | ------------------------ | -------------- |
| `app`        | Next.js App Router 関連  | フロントエンド |
| `components` | React コンポーネント     | フロントエンド |
| `ui`         | shadcn/ui コンポーネント | フロントエンド |
| `hooks`      | カスタムフック           | フロントエンド |
| `api`        | API routes               | バックエンド   |
| `auth`       | 認証・認可               | バックエンド   |
| `db`         | Supabase/データベース    | バックエンド   |
| `config`     | 設定ファイル             | ツール         |
| `deps`       | 依存関係                 | ツール         |

### 📋 タイトル（Description）- 必須

**厳密要件：**

- コロンとスペースの直後に記述
- 50 文字以内推奨
- 動詞から始める（日本語の場合は動作を表す表現）
- 末尾にピリオドを付けない
- 日本語を優先使用

**良い例：**

feat(components): ビジネス検索フィルターを追加
fix(api): ユーザー認証トークン検証を修正

**悪い例：**

更新 # 何を更新したか不明
feat: add new feature. # 末尾ピリオド

### 📄 本文・フッター（任意）

**本文：**

- タイトルの下に 1 行空行が必要
- 変更の理由と方法を説明
- What（何を）と Why（なぜ）に焦点

**フッター：**

- git trailer format 準拠
- `Closes #123`, `Fixes #456`, `Refs #789`
- `Co-authored-by: 名前 <email>`

## 🚨 破壊的変更（BREAKING CHANGE）

### 表記方法

**1. フッター形式（推奨）**
feat(api): 設定オブジェクトの拡張機能を追加
BREAKING CHANGE: 設定ファイルの extends キーが他の設定ファイル拡張に使用されるようになりました

**2. 型/スコープに`!`追加**
feat!: 商品発送時に顧客へメール送信
feat(api)!: 認証 API レスポンス形式を変更

## 🤖 AI 生成時の指針

### ファイルパス → 型/スコープ判定

- `src/components/` → `ui` スコープ
- `src/app/api/` → `api` スコープ
- `package.json` → `chore(deps)`
- `docs/` → `docs`
- `.github/workflows/` → `ci`

### 変更内容 → 型判定

- 新規ファイル → `feat`
- バグ修正 → `fix`
- テストファイル → `test`

### 言語・スタイル

- 主言語：日本語
- 敬語不要、簡潔に

このルールに従い、一貫性のある高品質なコミットメッセージを生成してください。
